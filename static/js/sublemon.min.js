!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sublemon=e():t.sublemon=e()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(3)},function(t,e){var i=function(t,e){void 0===e&&(e={}),this.label=t,this.noExpr=Boolean(e.noExpr),this.skip=Boolean(e.skip)};i.toJSON=function(){return this.label};var s={num:new i("num",{noExpr:!0}),regexp:new i("regexp"),string:new i("string",{noExpr:!0}),tmpl:new i("template",{noExpr:!0}),kw:new i("keyword"),name:new i("name",{noExpr:!0}),eof:new i("eof"),binop:new i("operator"),op:new i("operator"),space:new i("space",{skip:!0}),lineComment:new i("line-comment",{skip:!0}),blockComment:new i("block-comment",{skip:!0}),macro:new i("macro"),unknown:new i("unknown",{skip:!0})};t.exports={TokenType:i,types:s}},function(t,e,i){var s=i(7),n=i(1).types,r=function(t,e){this.options=s(t),this.keywords=this.options.keywordRegexp,this.input=String(e),this.pos=0,this.type=n.eof,this.value=null,this.start=this.end=this.pos,this.lastTokStart=this.lastTokEnd=this.pos,this.exprAllowed=!0};r.prototype.parse=function(){return this.nextToken(),this.parseTopLevel()},r.prototype.parseTopLevel=function(){for(var t=[];this.type!==n.eof;)t.push({type:this.type,value:this.value}),this.next();return t},r.prototype.eat=function(t){return this.type===t&&(this.next(),!0)},t.exports=r},function(t,e,s){var n=s(4);t.exports=n,t.exports.init=function(t,e){"object"==typeof t&&(e=t,t=null);var s,r=document.getElementsByClassName(t||"sublemon");for(i=0;s=r[i++];){var o=s.textContent,a=n(o,e);s.innerHTML=a}}},function(t,e,i){var s=i(2);i(8);var n=i(5);t.exports=function(t,e){var i=new s(e,t).parse();return n(i)},t.exports.parse=function(t,e){return new s(e,t).parse()}},function(t,e,i){function s(t,e){this.totalLines=1,this.pos=0,this.tokens=e,this.type=o.eof,this.value="",this.multilinePos=0}var n=i(11),r=n.lineBreakG,o=i(1).types,a=function(t,e,i){return["<",e,' class="sublemon-',i,'"',">",t,"</",e,">"].join("")};s.prototype.gen=function(){var t=[],e=this.tokens.length;for(this.nextToken();this.pos<=e;){var i=this.nextLine();t.push(i)}var s=a(t.join(""),"div","code"),n=this.generateGutter(),r=a(n+s,"div","wrap-inner");return a(r,"div","wrap")},s.prototype.nextToken=function(){var t=this.tokens[this.pos++];return null==t?(this.type=o.eof,void(this.value="")):(this.type=t.type,void(this.type===o.space?this.value=t.value.replace(/\t/g,"    "):this.value=t.value.replace(/</,"&lt;").replace(/>/,"&gt;")))},s.prototype.nextLine=function(){var t=[];t:for(;;){switch(this.type){case o.eof:break t;case o.kw:t.push(this.wrapTok("keyword"));break;case o.name:t.push(this.wrapTok("name"));break;case o.op:case o.binop:t.push(this.wrapTok("operator"));break;case o.regexp:t.push(this.wrapTok("regexp"));break;case o.string:t.push(this.wrapTok("string"));break;case o.num:t.push(this.wrapTok("number"));break;case o.lineComment:t.push(this.wrapTok("line-comment"));break;case o.macro:t.push(this.wrapTok("macro"));break;case o.space:var e=this.wrapSpace(t);if(e)break t;break;case o.blockComment:case o.tmpl:var e=this.wrapBlock(t);if(e)break t;break;default:t.push(this.value)}this.nextToken()}return a(t.join(""),"div","view-line")},s.prototype.breakLine=function(){return r.lastIndex=this.multilinePos,r.exec(this.value)},s.prototype.finishLine=function(t){return this.multilinePos=t.index+t[0].length,this.totalLines++,t},s.prototype.finishBlock=function(t){return this.multilinePos=0,t},s.prototype.wrapBlock=function(t){var e=this.breakLine();if(e){var i=this.value.slice(this.multilinePos,e.index);return t.push(a(i,"span",this.type.label)),this.finishLine(e)}var s=this.value.substr(this.multilinePos);return t.push(a(s,"span",this.type.label)),this.finishBlock()},s.prototype.wrapSpace=function(t){var e=this.breakLine();if(e){var i=this.value.slice(this.multilinePos,e.index)||"&#8203;";return t.push(i),this.finishLine(e)}return t.push(this.value.substr(this.multilinePos)||"&#8203;"),this.finishBlock()},s.prototype.wrapLine=function(t){return a(t,"span","line-content")},s.prototype.wrapTok=function(t){return a(this.value,"span",t)},s.prototype.generateGutter=function(){for(var t=0,e=this.totalLines,i=[];++t<=e;)i.push(a(t,"div","line-number"));return a(i.join(""),"div","gutter")},t.exports=function(t,e){return e=e||{},new s(e,t).gen()},t.exports.HTML=s},function(t,e){function i(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t<=65535&&(t>=170&&o.test(String.fromCharCode(t))))}function s(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t<=65535&&(t>=170&&a.test(String.fromCharCode(t)))))}var n="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",r="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",o=new RegExp("["+n+"]"),a=new RegExp("["+n+r+"]");t.exports={isIdentifierStart:i,isIdentifierChar:s}},function(t,e){var i=["abstract","alias","and","arguments","array","asm","assert","auto","alignof","as","base","begin","bool","boolean","break","byte","box","case","catch","char","checked","class","clone","compl","const","continue","crate","debug","debugger","decimal","declare","default","defer","deinit","delegate","delete","do","double","echo","else","end","ensure","enum","event","exec","except","export","explicit","extends","extension","extern","fallthrough","false","finally","fixed","float","for","foreach","friend","from","fn","func","function","global","goto","guard","in","if","implements","implicit","import","init","include","inline","instanceof","interface","internal","impl","lambda","let","lock","long","loop","module","mutable","mod","macro","match","move","NaN","namespace","native","next","new","nil","not","null","object","operator","or","out","override","offsetof","package","params","private","protected","protocal","public","priv","proc","pub","pure","raise","readonly","redo","ref","register","repeat","require","rescure","restrict","retry","return","sbyte","sealed","self","short","signed","sizeof","static","string","struct","subscript","super","synchronized","switch","template","then","this","throw","transient","true","try","type","typedef","typeof","undefined","unchecked","union","unless","unsigned","until","use","using","unsafe","var","virtual","void","volatile","when","where","while","with","xor","yield"];t.exports=function(t){t=t||{};var e={},s=t.keywordRegexp?t.keywordRegexp:null;return s||(s=new RegExp("^("+(t.keywords||i).join("|")+")$")),e.keywordRegexp=s,e}},function(t,e,i){var s=i(6),n=s.isIdentifierStart,r=s.isIdentifierChar,o=i(1).types,a=i(10),h=a.isNewLine,p=a.lineBreak,u=i(9).isOp,c=i(2).prototype;c.next=function(){this.lastTokEnd=this.end,this.lastTokStart=this.start,this.nextToken()},c.nextToken=function(){if(!this.skipSpace())return this.start=this.pos,this.pos>=this.input.length?this.finishToken(o.eof):void this.readToken(this.fullCharCodeAtPos())},c.readToken=function(t){return n(t)?this.readWord():this.getTokenFromCode(t)},c.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=57344)return t;var e=this.input.charCodeAt(this.pos+1);return(t<<10)+e-56613888},c.readSpace=function(){var t=this.pos,e=this.input.substr(t).search(/\S/);return e=e===-1?this.input.length:this.pos+e,this.pos=e,this.finishToken(o.space,this.input.slice(t,e)),!0},c.skipBlockComment=function(){var t=this.pos,e=this.input.indexOf("*/",this.pos+=2);return e===-1&&(e=this.input.length-1),this.pos=e+2,this.finishToken(o.blockComment,this.input.slice(t,e+2)),!0},c.skipLineComment=function(){return this.finishToken(o.lineComment,this.skipLine(2)),!0},c.skipLine=function(t){for(var e=this.pos,i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!h(i);)++this.pos,i=this.input.charCodeAt(this.pos);return this.input.slice(e,this.pos)},c.skipSpace=function(){var t=this.input.charCodeAt(this.pos);{if(47!==t)return t>8&&t<14?this.readSpace():32===t||160===t||8232===t||8233===t?this.readSpace():void 0;var e=this.input.charCodeAt(this.pos+1);if(42===e)return this.skipBlockComment();if(47===e)return this.skipLineComment()}},c.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp(this.genAllowed)):u(t)?this.finishOp(o.op,2):this.finishOp(o.binop,1)},c.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return 61===e?this.finishOp(o.op,i+1):this.finishOp(o.binop,i)},c.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(o.binop,2):this.finishOp(o.binop,1)},c.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(o.binop,2):61===e?this.finishOp(o.op,2):this.finishOp(o.binop,1)},c.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return(u(e)||47===e)&&(i=2,e=this.input.charCodeAt(this.pos+2),u(e)&&(i=3,e=this.input.charCodeAt(this.pos+3),45===e))?this.finishToken(o.lineComment,this.skipLine(4)):this.finishOp(o.op,i)},c.getTokenFromCode=function(t){switch(t){case 35:return this.finishToken(o.macro,this.skipLine(1));case 40:case 41:case 59:case 44:case 91:case 93:case 123:case 125:case 58:case 46:case 63:case 64:case 94:return this.finishOp(o.op,1);case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 96:return this.readTemplate();case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.finishOp(o.op,1);case 126:return this.finishOp(o.binop,1);default:return this.finishToken(o.unknown,this.skipLine(1))}},c.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+=e);return this.finishToken(t,i)},c.finishToken=function(t,e){this.end=this.pos,this.type=t,this.value=e,this.type.skip||(this.exprAllowed=!t.noExpr)},c.readRegexp=function(t){for(var e,i,s=this.pos;!(this.pos>=this.input.length);){var n=this.input.charAt(this.pos);if(p.test(n)){this.pos-=1;break}if(e)e=!1;else{if("["===n)i=!0;else if("]"===n&&i)i=!1;else if("/"===n&&!i)break;e="\\"===n}++this.pos}this.input.slice(s,this.pos);++this.pos;var r=(this.readWord1(),this.input.slice(s-1,this.pos));return this.finishToken(o.regexp,r)},c.readInt=function(t,e){for(var i=this.pos,s=0,n=0,r=null==e?1/0:e;n<r;++n){var o,a=this.fullCharCodeAtPos();if(o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0,o>=t)break;++this.pos,s=s*t+o}return this.pos===i||null!=e&&this.pos-i!==e?null:s},c.readNumber=function(t){var e=this.pos,i=!1;this.readInt(10);var s=this.fullCharCodeAtPos();46===s&&(++this.pos,this.readInt(10),i=!0,s=this.fullCharCodeAtPos()),69!==s&&101!==s||(s=this.input.charCodeAt(++this.pos),43!==s&&45!==s||++this.pos,null===this.readInt(10)&&this.readWord(),i=!0);var n=this.input.slice(e,this.pos);return this.finishToken(o.num,n)},c.readTemplate=function(){for(var t="",e=++this.pos;!(this.pos>=this.input.length);){var i=this.input.charCodeAt(this.pos);if(96===i)break;if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(),e=this.pos;else if(h(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}e=this.pos}else++this.pos}return t+=this.input.slice(e,this.pos++),this.finishToken(o.tmpl,"`"+t+"`")},c.readString=function(t){for(var e="",i=(this.start,++this.pos);!(this.pos>=this.input.length);){var s=this.fullCharCodeAtPos();if(s===t)break;if(92===s)e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(),i=this.pos;else{if(h(s))break;++this.pos}}var n=String.fromCharCode(t);return e+=this.input.slice(i,this.pos++),this.finishToken(o.string,n+e+n)},c.readEscapedChar=function(){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.fullCharCodeAtPos()&&++this.pos;case 10:return"";default:return String.fromCharCode(t)}},c.readWord1=function(){for(var t="",e=!0,i=this.pos;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(!r(s))break;++this.pos,e=!1}return t+=this.input.slice(i,this.pos)},c.readWord=function(){var t=this.readWord1(),e=this.keywords.test(t)?o.kw:o.name;return this.finishToken(e,t)}},function(t,e){e.isOp=function(t){return 33===t||35===t||37===t||38===t||42===t||43===t||45===t||60===t||61===t||62===t||63===t||64===t||94===t||124===t||126===t}},function(t,e){var i=/\r\n?|\n|\u2028|\u2029/;t.exports={lineBreak:i,lineBreakG:new RegExp(i.source,"g"),isNewLine:function(t){return 10===t||13===t||8232===t||8233===t}}},function(t,e){var i=/\r\n?|\n|\u2028|\u2029/;t.exports={lineBreak:i,lineBreakG:new RegExp(i.source,"g"),isNewLine:function(t){return 10===t||13===t||8232===t||8233===t}}}])});